<html>

<head>
  <meta charset="utf-8">
  <title>Degree Map</title>
  <link rel="stylesheet" href="style.css">
</head>
<!-- jquery garbage -->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<!-- reactjs garbage -->
<script src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>

<!-- must be removed -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<!-- Rendering  -->
<script type="text/babel">
  class Course extends React.Component {
    constructor(props) {
      super(props);
      this.state = {
        dept: props.dept,
        crs_id: props.crs_id,
        crs_name: props.crs_name,
        credits: props.credits
      }
    }
    render() {
      return (
        <div className="grid-item">
          <div className="item-content">
            <div className="item-title">{this.state.dept} {this.state.crs_id}</div>
            <div className="item-title2">{this.state.crs_name}</div>
          </div>
          <div className="item-credits">
            {this.state.credits}<span> </span>
          </div>
        </div>
      );
    }
  }

  class Term extends React.Component {
    constructor(props) {
      super(props);
      this.state = {
        number: props.number,
        courses: props.courses
      }
    }
    render() {
      return(
          <div className="grid-term">
            <div className="term-title">
              <div>Term {this.state.number}</div>
            </div>
            <div className="holder">
              {this.state.courses.map((course, courseIdx) => {
                return (
                  <Course key={courseIdx} dept={course.dept} crs_id={course.crs_id} crs_name={course.crs_name} credits={course.credits} />
                );
              })}
            </div>
            <div className="term-credits">
              <div>16 Credits</div>
            </div>
          </div>
      );
    }
  }

  class Audit extends React.Component {
    constructor(props) {
      super(props);
      this.state = {
        student: "",
        advisor: "",
        terms: props.terms // term size should be limited to 8 for four years.
      }
    }
    componentDidMount() {
      $(function() {
        $(".holder").sortable({
          connectWith: '.holder'
        });
      });
    }
    render() {
      return (<div className="grid">
        {this.state.terms.map((term_courses, index) => {
          return (<Term key={index} number={index+1} courses={term_courses} />);
        })}
        </div>);
    }
  }

  var degree =
    '{"name":"Computer Science","type":"Bachelor of Science Dual degree","courses":[{"dept":"CORE","crs_id":"100","crs_name":"New Student Orientation Seminar","credits":1},{"dept":"CORE","crs_id":"150","crs_name":"Composition I","credits":3},{"dept":"CORE","crs_id":"160","crs_name":"Composition II","credits":3},{"dept":"CORE","crs_id":"120","crs_name":"Critical Thinking","credits":2},{"dept":"CORE","crs_id":"201","crs_name":"Introduction to Business and Entrepreneurship","credits":3},{"dept":"CORE","crs_id":"260","crs_name":"Humanities","credits":3},{"dept":"CORE","crs_id":"360","crs_name":"The World and Its Peoples","credits":4},{"dept":"MATH","crs_id":"120","crs_name":"Calculus I","credits":4},{"dept":"MATH","crs_id":"125","crs_name":"Discrete Mathematics","credits":4},{"dept":"MATH","crs_id":"240","crs_name":"Linear Algebra","credits":4},{"dept":"NSCI","crs_id":"360","crs_name":"Statistics","credits":4},{"dept":"CSCI","crs_id":"110/110L","crs_name":"Introduction to Computer Science I & Lab","credits":4},{"dept":"CSCI","crs_id":"120/120L","crs_name":"Introduction to Computer Science II & Lab","credits":4},{"dept":"CSCI","crs_id":"201","crs_name":"Sophomore Seminar","credits":0.5},{"dept":"CSCI","crs_id":"202","crs_name":"Sophomore Seminar","credits":0.5},{"dept":"CSCI","crs_id":"230/230L","crs_name":"Introduction to Computer Architecture & Lab","credits":4},{"dept":"CSCI","crs_id":"241","crs_name":"Data Structures and Algorithms","credits":4},{"dept":"CSCI","crs_id":"261","crs_name":"Operating Systems","credits":4},{"dept":"CSCI","crs_id":"301","crs_name":"Junior Seminar","credits":0.5},{"dept":"CSCI","crs_id":"302","crs_name":"Junior Seminar","credits":0.5},{"dept":"CSCI","crs_id":"410","crs_name":"Senior Seminar","credits":2}],"options":[{"name":"A-Cultural Exposure","course_options":[{"dept":"Art","crs_id":"291","crs_name":"","credits":0},{"dept":"Art","crs_id":"292","crs_name":"","credits":0},{"dept":"English","crs_id":"275","crs_name":"","credits":0},{"dept":"History","crs_id":"180","crs_name":"","credits":0},{"dept":"History","crs_id":"270","crs_name":"","credits":0},{"dept":"Music","crs_id":"200","crs_name":"","credits":0},{"dept":"Music","crs_id":"206","crs_name":"","credits":0}]},{"name":"C-The Arts","course_options":[{"dept":"CORE","crs_id":"220","crs_name":"","credits":0},{"dept":"Music","crs_id":"207","crs_name":"","credits":0},{"dept":"Music","crs_id":"208","crs_name":"","credits":0},{"dept":"Music","crs_id":"205","crs_name":"","credits":0},{"dept":"Art","crs_id":"207","crs_name":"","credits":0},{"dept":"Art","crs_id":"208","crs_name":"","credits":0}]},{"name":"D-The Science","course_options":[{"dept":"CORE","crs_id":"240","crs_name":"","credits":0},{"dept":"BIOL","crs_id":"101/101L","crs_name":"","credits":0},{"dept":"CHEM","crs_id":"113/103","crs_name":"","credits":0},{"dept":"PHY","crs_id":"130/130L","crs_name":"","credits":0}]},{"name":"E-Social Science","course_options":[{"dept":"ECON","crs_id":"230","crs_name":"","credits":0},{"dept":"ECON","crs_id":"240","crs_name":"","credits":0},{"dept":"HIS","crs_id":"160","crs_name":"","credits":0},{"dept":"PSCI","crs_id":"122","crs_name":"","credits":0},{"dept":"PSY","crs_id":"180","crs_name":"","credits":0},{"dept":"SOC","crs_id":"100","crs_name":"","credits":0}]},{"name":"language 01","course_options":[{"dept":"SPAN","crs_id":"101","crs_name":"Elementary I","credits":4},{"dept":"FREN","crs_id":"101","crs_name":"Elementary I","credits":4}]},{"name":"language 02","course_options":[{"dept":"SPAN","crs_id":"102","crs_name":"Elementary II","credits":4},{"dept":"FREN","crs_id":"102","crs_name":"Elementary II","credits":4}]},{"name":"language 03","course_options":[{"dept":"SPAN","crs_id":"200","crs_name":"Intermediate","credits":4},{"dept":"FREN","crs_id":"200","crs_name":"Intermediate","credits":4}]},{"name":"Programming Language or Database","course_options":[{"dept":"CSCI","crs_id":"282","crs_name":"Programming Languages","credits":4},{"dept":"CSCI","crs_id":"312","crs_name":"Database","credits":4}]},{"name":"Major Required Electives(6-8)","course_options":[{"dept":"CSCI","crs_id":"","crs_name":"","credits":0},{"dept":"CSCI","crs_id":"","crs_name":"","credits":0},{"dept":"CSCI","crs_id":"","crs_name":"","credits":0}]}]}';
  var degreeObj = JSON.parse(degree);
  function generateSampleAudit(degree) {
    var audit = {
      terms: [],
    };
    var courses = [];
    for (var i = 0; i < degree.courses.length; i++) {
      courses.push(degree.courses[i]);
    }
    for (var i = 0; i < degree.options.length; i++) {
      courses.push(degree.options[i].course_options[0]);
    }
    var termCourseSize;
    if (courses.length % 8 == 0) {
      termCourseSize = courses.length / 8;
    } else {
      termCourseSize = Math.floor(courses.length / 8);
    }
    var currTerm = []
    for (var i = 0; i < courses.length; i++) {
      if (currTerm.length > termCourseSize) {
        audit.terms.push(currTerm);
        currTerm = []
      }
      currTerm.push(courses[i])
    }
    if (currTerm.length > 0) {
      audit.terms.push(currTerm);
    }
    return audit
  }
  var audit = generateSampleAudit(degreeObj);
  ReactDOM.render(
    <Audit terms={audit.terms}/>,
    document.getElementById('main')
  );
</script>

<body>
  <div id="app">
    <div id="university">
      <div id="page-content">
        <div>
          <div id="unit">
            <div id="unit-header">
              <div id="unit-name">
                <h1>BS Computer Science
                  <!---->
                </h1>
                <h4>Natural Sciences, Mathematics &amp; Business</h4>
              </div>
              <div class="header-credits"><span>123 Credit Hours</span></div>
              <div class="breadcrumbs">Majors <span>BS Computer Science</span>
                <!----> / <span>Degree Plan</span></div>
            </div>
            <span id="plans">
              <div id="plan-tabs">
                <!---->
              </div>
              <!---->
              <div class="vue-degree-plan" id="main">
              </div>
            </span>
          </div>
        </div>
      </div>
    </div>
    <div id="wrapper">
      <!---->
    </div>
  </div>
</body>

</html>
